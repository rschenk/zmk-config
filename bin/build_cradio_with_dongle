#!/usr/bin/env bash

cd /workspaces/zmk/app

west build \
  --pristine \
  --board raytac_mdbt50q_rx \
  -- \
  -DSHIELD="cradio_dongle" \
  -DZMK_CONFIG="/workspaces/zmk-config/config" \
  -DZMK_EXTRA_MODULES="/workspaces/zmk-modules/zmk-tri-state;/workspaces/zmk-modules/zmk-auto-layer;/workspaces/zmk-modules/zmk-component-raytac-dongle" &&

mv build/zephyr/zmk.uf2 /workspaces/zmk-config/dist/cradio_dongle.uf2 &&

west build \
  --pristine \
  --board nice_nano_v2 \
  -- \
  -DSHIELD="cradio_left" \
  -DZMK_CONFIG="/workspaces/zmk-config/config" \
  -DZMK_EXTRA_MODULES="/workspaces/zmk-modules/zmk-tri-state;/workspaces/zmk-modules/zmk-auto-layer" \
  -DCONFIG_ZMK_SPLIT=y -DCONFIG_ZMK_SPLIT_ROLE_CENTRAL=n &&

mv build/zephyr/zmk.uf2 /workspaces/zmk-config/dist/cradio_left.uf2 &&

west build \
  --pristine \
  --board nice_nano_v2 \
  -- \
  -DSHIELD="cradio_right" \
  -DZMK_CONFIG="/workspaces/zmk-config/config" \
  -DZMK_EXTRA_MODULES="/workspaces/zmk-modules/zmk-tri-state;/workspaces/zmk-modules/zmk-auto-layer" \
  -DCONFIG_ZMK_SPLIT=y -DCONFIG_ZMK_SPLIT_ROLE_CENTRAL=n &&

mv build/zephyr/zmk.uf2 /workspaces/zmk-config/dist/cradio_right.uf2

ls -la /workspaces/zmk-config/dist/cradio_*
